<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:"
    />
    <meta name="theme-color" content="#0f172a" />
    <title>Cloudcook PSADT Helper</title>
    <link rel="icon" type="image/svg+xml" href="assets/app-icon.svg" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- SVG Icon Sprite -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="ic-copy" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1Zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm0 16H8V7h11v14Z"
        />
      </symbol>
      <symbol id="ic-theme" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 3a9 9 0 1 0 9 9a7 7 0 0 1-9-9Z" />
      </symbol>
      <symbol id="ic-files" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M14 2H6a2 2 0 0 0-2 2v14h2V4h8V2Zm4 4h-8a2 2 0 0 0-2 2v14h10a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2Zm0 14H8V8h10v12Z"
        />
      </symbol>
      <symbol id="ic-play" viewBox="0 0 24 24">
        <path fill="currentColor" d="M8 5v14l11-7L8 5Z" />
      </symbol>
      <symbol id="ic-download" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M5 20h14v-2H5v2Zm7-18l-5 5h3v6h4V7h3l-5-5Z"
        />
      </symbol>
      <symbol id="ic-edit" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25ZM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82Z"
        />
      </symbol>
      <symbol id="ic-star" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21 12 17.27Z"
        />
      </symbol>
      <symbol id="ic-star-outline" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24Zm-10 6.11-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.88 4.38.38-3.32 2.88 1 4.28L12 15.35Z"
        />
      </symbol>
    </svg>
    <header class="app-header" data-sticky>
      <div class="header-inner shell">
        <a class="brand" href="#intro">
          <img
            class="logo"
            src="assets/cloudcook-logo.png"
            alt="Cloudcook"
            data-hide-on-error
          />
          <div class="brand-copy">
            <h1>Cloudcook PSADT Helper</h1>
            <span class="brand-subtitle">Deployment toolkit companion</span>
          </div>
        </a>
        <button
          class="nav-toggle"
          type="button"
          aria-expanded="false"
          aria-controls="primary-nav"
          data-nav-toggle
        >
          <span class="nav-toggle-box" aria-hidden="true">
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
          </span>
          <span class="nav-toggle-label">Menu</span>
        </button>
        <div class="header-menu" data-nav-menu>
          <nav
            class="header-links"
            id="primary-nav"
            aria-label="Primary navigation"
          >
            <a class="header-link" href="#intro">Overview</a>
            <a class="header-link" href="#scenario-search">Scenarios</a>
            <a class="header-link" href="#builder">Command builder</a>
            <a class="header-link" href="#variable-panel">Variable helper</a>
            <a
              class="header-link"
              href="docs/reference/v4-function-mapping/"
            >
              <svg class="icon" aria-hidden="true"><use href="#ic-files" /></svg>
              <span>Function mapping</span>
            </a>
          </nav>
          <div class="header-toggles">
            <label for="telemetry-toggle" class="telemetry-toggle"
              ><input type="checkbox" id="telemetry-toggle" /> Enable telemetry</label
            >
            <label for="cache-toggle" class="telemetry-toggle"
              ><input type="checkbox" id="cache-toggle" /> Enable offline cache</label
            >
          </div>
        </div>
      </div>
    </header>

    <main id="main-content" tabindex="-1">
      <section id="intro" class="hero-section">
        <div class="shell">
          <div class="hero">
            <div class="hero-grid">
              <div class="hero-content">
                <span class="hero-eyebrow">PSAppDeployToolkit v4 ready</span>
                <h2>
                  Ship reliable deployments without the guesswork
                  <span aria-hidden="true">‚ú®</span>
                </h2>
                <p class="hero-copy">
                  Cloudcook PSADT Helper translates curated packaging scenarios
                  into production-ready commands, pairing automation with
                  human-friendly guidance.
                </p>
                <ul class="hero-steps">
                  <li>
                    <span class="emoji" aria-hidden="true">üìÇ</span
                    ><span>Browse curated PSADT scenarios tailored to common rollouts.</span>
                  </li>
                  <li>
                    <span class="emoji" aria-hidden="true">üõ†Ô∏è</span
                    ><span>Complete the smart form with the context your environment needs.</span>
                  </li>
                  <li>
                    <span class="emoji" aria-hidden="true">‚ö°</span
                    ><span
                      >Queue, export, or share commands instantly‚Äîno waiting or
                      guesswork.</span
                    >
                  </li>
                </ul>
                <div class="hero-actions">
                  <a href="#scenario-search" class="btn btn-primary"
                    >Start building</a
                  >
                  <a
                    href="#builder"
                    class="btn btn-ghost"
                    data-open-builder
                    >Open command builder</a
                  >
                </div>
              </div>
              <div class="hero-visual" aria-hidden="true">
                <div class="hero-card">
                  <img
                    src="assets/cloudcook-logo.png"
                    alt=""
                    class="hero-logo"
                    data-hide-on-error
                  />
                  <p class="hero-stat">60+ curated commands</p>
                  <p class="hero-hint">Aligned with PSADT best practices.</p>
                </div>
              </div>
            </div>
            <div class="hero-resource resource-card" role="complementary">
              <h3>Looking for function mappings?</h3>
              <p>
                Explore every PSAppDeployToolkit v4 function and see how it maps to
                helper scenarios in one place.
              </p>
              <a
                class="btn btn-ghost resource-link"
                href="docs/reference/v4-function-mapping/"
              >
                <svg class="icon" aria-hidden="true"><use href="#ic-files" /></svg>
                <span>Browse function mapping</span>
              </a>
            </div>
          </div>
        </div>
      </section>

      <section class="workspace" aria-label="PSADT workspace">
        <div class="shell">
          <div class="workspace-grid">
            <aside class="sidebar" aria-label="Scenarios">
              <input
                type="search"
                id="scenario-search"
                class="scenario-search"
                placeholder="Search"
                aria-label="Search scenarios"
              />
              <div id="scenario-list"></div>
            </aside>

            <section class="content">
              <div id="scenario-details" class="card hidden"></div>
              <div id="output" class="card hidden">
                <div class="output-toolbar">
                  <span class="output-title">Generated Command</span>
                  <div style="display: flex; gap: 8px">
                    <button id="add-btn" class="btn">
                      <svg class="icon"><use href="#ic-play" /></svg><span>Add</span>
                    </button>
                    <button id="copy-btn" class="btn">
                      <svg class="icon"><use href="#ic-copy" /></svg><span>Copy</span>
                    </button>
                    <button id="share-btn" class="btn">
                      <svg class="icon"><use href="#ic-copy" /></svg
                      ><span>Permalink</span>
                    </button>
                    <button id="export-btn" class="btn">
                      <svg class="icon"><use href="#ic-download" /></svg
                      ><span>Export</span>
                    </button>
                    <button id="import-btn" class="btn">
                      <svg class="icon"><use href="#ic-files" /></svg
                      ><span>Import</span>
                    </button>
                    <input
                      type="file"
                      id="import-file"
                      accept="application/json"
                      hidden
                    />
                    <button id="reset-btn" class="btn"><span>Reset</span></button>
                  </div>
                </div>
                <pre id="command" class="code" aria-live="polite"></pre>
              </div>
              <div id="script" class="card hidden">
                <div class="output-toolbar">
                  <span class="output-title">Script</span>
                  <div style="display: flex; gap: 8px">
                    <button id="share-script-btn" class="btn">
                      <svg class="icon"><use href="#ic-copy" /></svg
                      ><span>Copy Link</span>
                    </button>
                    <button id="download-script-btn" class="btn">
                      <svg class="icon"><use href="#ic-download" /></svg
                      ><span>Download</span>
                    </button>
                    <button id="copy-script-btn" class="btn">
                      <svg class="icon"><use href="#ic-copy" /></svg
                      ><span>Copy Script</span>
                    </button>
                  </div>
                </div>
                <div id="script-commands" aria-live="polite"></div>
              </div>
              <details id="builder" class="card panel" data-panel>
                <summary class="panel-header">
                  <div class="panel-title">
                    <span class="panel-title-label">Command Builder</span>
                    <span class="panel-title-hint">Compose reusable PSADT snippets</span>
                  </div>
                  <span class="panel-toggle" aria-hidden="true"></span>
                </summary>
                <div class="panel-body" data-panel-body>
                  <div class="panel-body-content">
                    <div class="cmd-layout">
                      <div class="cmd-library">
                        <label class="visually-hidden" for="command-search"
                          >Search commands</label
                        >
                        <input
                          type="search"
                          id="command-search"
                          class="cmd-search"
                          placeholder="Search commands"
                          aria-label="Search commands"
                        />
                        <div
                          id="command-boxes"
                          class="cmd-boxes"
                          aria-label="PSADT commands"
                        ></div>
                      </div>
                      <div
                        id="command-detail"
                        class="cmd-detail empty"
                        aria-live="polite"
                      >
                        <p>Select a command to view parameters.</p>
                      </div>
                    </div>
                    <div
                      id="editor-area"
                      class="cmd-editor"
                      contenteditable="true"
                      aria-label="Custom script editor"
                    ></div>
                  </div>
                </div>
              </details>
              <div id="empty" class="empty">
                <p>Select a scenario to begin.</p>
              </div>
            </section>

            <aside class="tools" aria-label="Tools">
              <div class="card">
                <h3 class="card-title">
                  <svg class="icon"><use href="#ic-theme" /></svg><span>Theme</span>
                </h3>
                <div class="theme-picker" title="Choose accent color">
                  <span class="theme-label">Accent</span>
                  <div
                    class="swatches"
                    id="accent-swatches"
                    aria-label="Accent presets"
                  >
                    <button
                      class="swatch"
                      data-color="#175BEB"
                      style="--c: #175beb"
                      aria-label="Brand Blue"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#4776E6"
                      style="--c: #4776e6"
                      aria-label="Blue"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#8E54E9"
                      style="--c: #8e54e9"
                      aria-label="Violet"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#EC008C"
                      style="--c: #ec008c"
                      aria-label="Magenta"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#FFC225"
                      style="--c: #ffc225"
                      aria-label="Gold"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#1FB381"
                      style="--c: #1fb381"
                      aria-label="Green"
                    ></button>
                  </div>
                  <input
                    id="accent"
                    class="accent"
                    type="color"
                    value="#175BEB"
                    aria-label="Custom accent color"
                  />
                </div>
                <div
                  class="theme-picker"
                  title="Choose background color"
                  style="margin-top: 8px"
                >
                  <span class="theme-label">Background</span>
                  <div
                    class="swatches"
                    id="bg-swatches"
                    aria-label="Background presets"
                  >
                    <button
                      class="swatch"
                      data-color="#FAF8FF"
                      style="--c: #faf8ff"
                      aria-label="Cloudcook Base"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#FFFFFF"
                      style="--c: #ffffff"
                      aria-label="White"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#E9E8FF"
                      style="--c: #e9e8ff"
                      aria-label="Lavender"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#FFFDF7"
                      style="--c: #fffdf7"
                      aria-label="Ivory"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#F6F6FF"
                      style="--c: #f6f6ff"
                      aria-label="Mist"
                    ></button>
                    <button
                      class="swatch"
                      data-color="#F3F1FE"
                      style="--c: #f3f1fe"
                      aria-label="Lilac"
                    ></button>
                  </div>
                  <input
                    id="background"
                    class="accent"
                    type="color"
                    value="#FAF8FF"
                    aria-label="Custom background color"
                  />
                </div>
                <div
                  class="theme-picker"
                  title="Choose color mode"
                  style="margin-top: 8px"
                >
                  <span class="theme-label">Mode</span>
                  <select id="color-mode" aria-label="Color mode">
                    <option value="auto">Auto</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                    <option value="hc">High Contrast</option>
                  </select>
                </div>
              </div>
              <details
                class="card panel variable-card"
                id="variable-panel"
                data-panel
              >
                <summary class="panel-header">
                  <div class="panel-title">
                    <span class="panel-title-label">Variable Helper</span>
                    <span class="panel-title-hint">Reference PSADT runtime variables</span>
                  </div>
                  <span class="panel-toggle" aria-hidden="true"></span>
                </summary>
                <div class="panel-body" data-panel-body>
                  <div class="panel-body-content">
                    <p class="variable-hint">
                      Based on the
                      <a
                        href="https://psappdeploytoolkit.com/docs/reference/variables"
                        target="_blank"
                        rel="noreferrer"
                        >PSADT 4.1 variable reference</a
                      >.
                      <span
                        id="variable-count"
                        class="variable-count"
                        aria-live="polite"
                      ></span>
                    </p>
                    <div class="variable-search">
                      <label class="visually-hidden" for="variable-search"
                        >Search variables</label
                      >
                      <input
                        type="search"
                        id="variable-search"
                        class="variable-search-input"
                        placeholder="Search variables"
                        aria-label="Search variables"
                      />
                    </div>
                    <div class="variable-helper">
                      <div id="variable-results" class="variable-results"></div>
                      <div
                        id="variable-detail"
                        class="variable-detail empty"
                        aria-live="polite"
                      >
                        <p class="variable-empty">Select a variable to see details.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </details>
            </aside>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="shell footer-inner">
        <span>Cloudcook PSADT Helper</span>
        <span aria-hidden="true">¬∑</span>
        <a href="https://psappdeploytoolkit.com/" target="_blank" rel="noreferrer"
          >PSADT Docs</a
        >
        <span aria-hidden="true">¬∑</span>
        <a
          href="https://github.com/PSAppDeployToolkit/PSAppDeployToolkit"
          target="_blank"
          rel="noreferrer"
          >GitHub</a
        >
      </div>
    </footer>

    <div
      id="variable-modal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="variable-modal-title"
    >
      <div class="modal-overlay" data-modal-dismiss></div>
      <div class="modal-container" role="document">
        <button
          type="button"
          class="modal-close"
          id="variable-modal-close"
          data-modal-dismiss
          aria-label="Close variable details"
        >
          <span aria-hidden="true">&times;</span>
        </button>
        <div id="variable-modal-body" class="modal-body"></div>
      </div>
    </div>

    <script src="src/js/telemetry.js"></script>
    <script src="src/js/legacy-mapping.js"></script>
    <script src="src/js/commands.js"></script>
    <script src="src/js/state.js"></script>
    <script src="src/js/favorites.js"></script>
    <script src="src/js/scenario-list.js"></script>
    <script src="src/js/variables.js"></script>
    <script src="src/js/sw-registration.js"></script>
    <script src="src/js/main.js"></script>
    <script src="src/js/editor.js"></script>
  </body>
</html>
