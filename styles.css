/*
 * Design tokens
 * ------------------------------------------------------------------
 */
:root {
  --font-sans: "Inter", "Segoe UI", "Helvetica Neue", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Mono", ui-monospace, SFMono-Regular,
    Menlo, Consolas, "Liberation Mono", monospace;

  --fs-200: 0.75rem;
  --fs-300: 0.875rem;
  --fs-400: 1rem;
  --fs-500: 1.125rem;
  --fs-600: 1.375rem;
  --fs-700: clamp(1.8rem, 1.35rem + 1vw, 2.3rem);
  --fs-800: clamp(2.4rem, 1.6rem + 2vw, 3rem);

  --space-3xs: 0.25rem;
  --space-2xs: 0.375rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4.5rem;

  --radius-sm: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1.25rem;
  --radius-pill: 999px;

  --shadow-xs: 0 1px 2px rgba(15, 23, 42, 0.08);
  --shadow-sm: 0 6px 18px rgba(15, 23, 42, 0.08);
  --shadow-md: 0 18px 40px rgba(15, 23, 42, 0.12);

  --transition-fast: 150ms ease;
  --transition-base: 220ms cubic-bezier(0.4, 0, 0.2, 1);

  --max-width: 1200px;

  --color-bg: #f5f6f8;
  --color-bg-alt: #eef1f4;
  --color-surface: #ffffff;
  --color-elevated: #fafbfc;
  --color-border: #d4d9e2;
  --color-border-strong: #bcc3d1;
  --color-text: #151922;
  --color-heading: #090c12;
  --color-muted: #5a6270;
  --color-subtle: #8790a0;
  --color-accent: #1f4a7a;
  --color-accent-strong: #16385c;
  --color-accent-soft: rgba(31, 74, 122, 0.1);
  --color-glow: rgba(31, 74, 122, 0.2);
  --color-success: #1fb381;
  --color-danger: #ec008c;

  --header-height: 4.5rem;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --color-bg: #0f172a;
    --color-bg-alt: #111c32;
    --color-surface: #111c32;
    --color-elevated: #152440;
    --color-border: #1f2f4b;
    --color-border-strong: #2a3c5d;
    --color-text: #e6ecff;
    --color-heading: #f8fbff;
    --color-muted: #a0adcb;
    --color-subtle: #7f8aa5;
    --color-accent-soft: rgba(31, 74, 122, 0.22);
    --color-glow: rgba(31, 74, 122, 0.32);
  }
}

[data-theme='dark'] {
  --color-bg: #0f172a;
  --color-bg-alt: #111c32;
  --color-surface: #111c32;
  --color-elevated: #152440;
  --color-border: #1f2f4b;
  --color-border-strong: #2a3c5d;
  --color-text: #e6ecff;
  --color-heading: #f8fbff;
  --color-muted: #a0adcb;
  --color-subtle: #7f8aa5;
  --color-accent-soft: rgba(31, 74, 122, 0.22);
  --color-glow: rgba(31, 74, 122, 0.32);
}

[data-theme='hc'] {
  --color-bg: #000;
  --color-surface: #000;
  --color-elevated: #000;
  --color-border: #fff;
  --color-border-strong: #fff;
  --color-text: #fff;
  --color-heading: #fff;
  --color-muted: #fff;
  --color-subtle: #fff;
  --color-accent: #ffff00;
  --color-accent-strong: #ffff00;
  --color-accent-soft: rgba(255, 255, 0, 0.18);
  --color-success: #0f0;
  --color-glow: rgba(255, 255, 0, 0.4);
}

/*
 * Base styles
 * ------------------------------------------------------------------
 */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--color-bg);
  background-image: radial-gradient(circle at 12% -10%,
      color-mix(in srgb, var(--color-accent) 14%, transparent) 0%, transparent
      58%), radial-gradient(circle at 86% 0%,
      color-mix(in srgb, var(--color-accent) 10%, transparent) 0%, transparent
      64%);
  color: var(--color-text);
  font-family: var(--font-sans);
  font-size: var(--fs-400);
  line-height: 1.65;
  letter-spacing: 0.01em;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color-scheme: light dark;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

main {
  flex: 1;
}

img {
  display: block;
  max-width: 100%;
  height: auto;
}

svg {
  flex: none;
  fill: currentColor;
}

.icon {
  width: 16px;
  height: 16px;
  display: inline-flex;
}

a {
  color: var(--color-accent);
  text-decoration: none;
  transition: color var(--transition-fast),
    text-decoration-color var(--transition-fast);
}

a:hover {
  color: var(--color-accent-strong);
  text-decoration: underline;
  text-decoration-color: currentColor;
}

a:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 3px;
}

button,
input,
select,
textarea {
  font: inherit;
  color: inherit;
}

:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 3px;
}

h1,
 h2,
 h3,
 h4 {
  margin: 0;
  font-weight: 700;
  color: var(--color-heading);
}

p {
  margin: 0;
}

ul {
  margin: 0;
  padding-left: 1.25rem;
}

.skip-link {
  position: absolute;
  top: -100%;
  left: 0;
  padding: var(--space-xs) var(--space-sm);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  background: var(--color-accent);
  color: #fff;
  font-weight: 600;
  text-decoration: none;
  z-index: 1000;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 0;
}

/*
 * Header
 * ------------------------------------------------------------------
 */

.app-header {
  position: sticky;
  top: 0;
  z-index: 50;
  background: color-mix(in srgb, var(--color-surface) 88%, transparent);
  border-bottom: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent);
  box-shadow: 0 18px 36px color-mix(in srgb, var(--color-glow) 16%, transparent);
  backdrop-filter: blur(14px);
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base);
}

.header-inner {
  width: min(var(--max-width), calc(100% - 2.5rem));
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-lg);
  padding: clamp(var(--space-sm), 1.2vw, var(--space-md)) 0;
  flex-wrap: wrap;
}

.brand {
  display: inline-flex;
  align-items: center;
  gap: var(--space-md);
  min-width: 0;
}

.logo {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-xs);
}

.brand-copy {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.brand-copy h1 {
  font-size: var(--fs-600);
  letter-spacing: -0.01em;
}

.brand-subtitle {
  font-size: var(--fs-300);
  font-weight: 600;
  color: var(--color-muted);
}

.header-actions {
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  flex-wrap: wrap;
}

.header-links {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.header-link {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-xs) clamp(var(--space-sm), 1.5vw, var(--space-lg));
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--color-border) 75%, var(--color-accent) 25%);
  background: color-mix(in srgb, var(--color-surface) 96%, var(--color-accent) 4%);
  color: var(--color-accent);
  font-size: var(--fs-300);
  font-weight: 600;
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base),
    transform var(--transition-fast);
}

.header-link .icon {
  width: 18px;
  height: 18px;
}

.header-link:hover {
  background: color-mix(in srgb, var(--color-accent) 14%, var(--color-surface) 86%);
  border-color: color-mix(in srgb, var(--color-accent) 45%, var(--color-border) 55%);
  box-shadow: 0 12px 28px color-mix(in srgb, var(--color-glow) 22%, transparent);
  transform: translateY(-1px);
}

.telemetry-toggle {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--color-border) 85%, transparent);
  background: color-mix(in srgb, var(--color-surface) 94%, transparent 6%);
  color: var(--color-muted);
  font-size: var(--fs-300);
  font-weight: 600;
  cursor: pointer;
  transition: border-color var(--transition-base),
    box-shadow var(--transition-base), color var(--transition-fast),
    background var(--transition-base);
}

.header-toggles {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  justify-content: flex-end;
}

.telemetry-toggle:hover {
  border-color: color-mix(in srgb, var(--color-accent) 30%, var(--color-border) 70%);
  color: var(--color-text);
  background: color-mix(in srgb, var(--color-accent) 8%, var(--color-surface) 92%);
  box-shadow: 0 10px 20px color-mix(in srgb, var(--color-glow) 18%, transparent);
}

.telemetry-toggle input {
  width: 18px;
  height: 18px;
  accent-color: var(--color-accent);
}

/*
 * Hero section
 * ------------------------------------------------------------------
 */
.hero {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-xl), 5vw, var(--space-3xl));
  padding: clamp(var(--space-2xl), 8vw, var(--space-3xl));
  border-radius: calc(var(--radius-lg) + 0.5rem);
  background: linear-gradient(140deg,
      color-mix(in srgb, var(--color-surface) 94%, var(--color-accent) 6%) 0%,
      color-mix(in srgb, var(--color-surface) 88%, var(--color-accent) 12%) 100%);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, var(--color-accent) 30%);
  box-shadow: 0 28px 50px color-mix(in srgb, var(--color-glow) 22%, transparent);
  overflow: hidden;
  isolate: isolate;
  scroll-margin-top: calc(var(--header-height) + var(--space-lg));
}

.hero::before,
.hero::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.hero::before {
  background: radial-gradient(115% 115% at 0% 0%,
      color-mix(in srgb, var(--color-accent) 22%, transparent) 0%, transparent 70%);
  opacity: 0.4;
  mix-blend-mode: screen;
}

.hero::after {
  background: radial-gradient(80% 80% at 85% 25%,
      color-mix(in srgb, var(--color-accent) 14%, transparent) 0%, transparent 70%);
  opacity: 0.55;
}

.hero > * {
  position: relative;
  z-index: 1;
}

.hero-grid {
  display: grid;
  gap: clamp(var(--space-lg), 4vw, var(--space-2xl));
  align-items: center;
}

@media (min-width: 900px) {
  .hero-grid {
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
  }
}

.hero-content {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-lg), 3vw, var(--space-2xl));
  max-width: 52ch;
}

.hero-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-3xs) var(--space-md);
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-surface) 92%, var(--color-accent) 8%);
  box-shadow: var(--shadow-xs);
  font-size: var(--fs-300);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--color-accent-strong);
}

.hero h2 {
  font-size: var(--fs-800);
  line-height: 1.05;
  letter-spacing: -0.015em;
}

.hero-copy {
  max-width: 42ch;
  font-size: var(--fs-500);
  color: color-mix(in srgb, var(--color-muted) 85%, var(--color-text) 15%);
}

.hero-steps {
  list-style: none;
  padding: 0;
  display: grid;
  gap: var(--space-sm);
}

.hero-steps li {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: var(--space-md);
  align-items: center;
  padding: var(--space-md) var(--space-lg);
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  border: 1px solid color-mix(in srgb, var(--color-border) 78%, transparent 22%);
  box-shadow: var(--shadow-xs);
  transition: transform var(--transition-fast),
    box-shadow var(--transition-base), border-color var(--transition-base);
}

.hero-steps .emoji {
  font-size: 1.4rem;
}

@media (hover: hover) and (pointer: fine) {
  .hero-steps li:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
    border-color: color-mix(in srgb, var(--color-accent) 28%, var(--color-border) 72%);
  }
}

.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
}

.hero-actions .btn {
  min-width: clamp(180px, 42vw, 220px);
}

.hero-actions .btn-ghost {
  color: var(--color-text);
}

.hero-visual {
  display: flex;
  justify-content: center;
}

.hero-card {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-md);
  padding: clamp(var(--space-lg), 4vw, var(--space-2xl));
  border-radius: var(--radius-lg);
  background: color-mix(in srgb, var(--color-surface) 98%, transparent 2%);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent 30%);
  box-shadow: 0 20px 36px color-mix(in srgb, var(--color-glow) 18%, transparent);
  text-align: center;
  min-width: min(320px, 100%);
  animation: heroFloat 12s ease-in-out infinite alternate;
}

.hero-logo {
  width: 72px;
  height: 72px;
  border-radius: 20px;
  box-shadow: var(--shadow-xs);
}

.hero-stat {
  font-size: var(--fs-500);
  font-weight: 700;
}

.hero-hint {
  font-size: var(--fs-300);
  color: var(--color-muted);
}

.hero-resource {
  align-self: flex-start;
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  border-radius: var(--radius-md);
  padding: clamp(var(--space-md), 3vw, var(--space-xl));
  border: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent 25%);
  box-shadow: var(--shadow-xs);
}

.hero-resource h3 {
  font-size: var(--fs-500);
}

.hero-resource p {
  color: var(--color-muted);
}

.resource-card {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

@keyframes heroFloat {
  0% {
    transform: translateY(0) rotate(-1deg);
    box-shadow: var(--shadow-sm);
  }
  100% {
    transform: translateY(-6px) rotate(1.5deg);
    box-shadow: var(--shadow-md);
  }
}

.resource-link .icon {
  width: 18px;
  height: 18px;
}

/*
 * Layout
 * ------------------------------------------------------------------
 */
.layout {
  width: min(var(--max-width), calc(100% - 2.75rem));
  margin: 0 auto;
  display: grid;
  gap: clamp(var(--space-xl), 6vw, var(--space-3xl));
  padding: clamp(var(--space-2xl), 8vw, var(--space-3xl)) 0
    clamp(var(--space-3xl), 10vw, calc(var(--space-3xl) + var(--space-lg)));
}

.layout-3 {
  grid-template-columns: 1fr;
}

@media (min-width: 900px) {
  .layout-3 {
    grid-template-columns: minmax(0, 280px) minmax(0, 1fr);
  }
}

@media (min-width: 1180px) {
  .layout-3 {
    grid-template-columns: minmax(0, 280px) minmax(0, 1fr) minmax(0, 320px);
  }
}


.sidebar,
.tools {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-lg), 3vw, var(--space-2xl));
}

.sidebar {
  position: sticky;
  top: calc(var(--header-height) + var(--space-xl));
  align-self: start;
  max-height: calc(100vh - var(--header-height) - 2 * var(--space-xl));
  padding: clamp(var(--space-lg), 4vw, var(--space-xl));
  border-radius: var(--radius-lg);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  border: 1px solid color-mix(in srgb, var(--color-border) 78%, transparent 22%);
  box-shadow: 0 18px 36px color-mix(in srgb, var(--color-glow) 16%, transparent);
  overflow: auto;
}

.sidebar::-webkit-scrollbar,
.variable-results::-webkit-scrollbar {
  width: 8px;
}

.sidebar::-webkit-scrollbar-thumb,
.variable-results::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-border) 60%, transparent);
  border-radius: var(--radius-pill);
}

.scenario-search {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.scenario-search:focus {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 22%, transparent);
}

#scenario-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.favorites-filter {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  margin: var(--space-sm) 0;
  font-size: var(--fs-300);
  color: var(--color-muted);
  cursor: pointer;
}

.favorites-filter.is-disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.favorites-filter input {
  width: 1rem;
  height: 1rem;
  margin: 0;
}

.favorites-filter.is-disabled input {
  cursor: not-allowed;
}

.favorites-filter.is-disabled span {
  pointer-events: none;
}

.scenario-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.scenario-section + .scenario-section {
  margin-top: var(--space-md);
}

.scenario-section-title {
  font-size: var(--fs-300);
  font-weight: 600;
  color: var(--color-subtle);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.scenario-empty {
  padding: var(--space-md) var(--space-lg);
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--color-surface) 95%, transparent 5%);
  color: var(--color-muted);
  font-size: var(--fs-300);
}

.scenario-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  padding: var(--space-md) var(--space-lg);
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent 25%);
  background: color-mix(in srgb, var(--color-surface) 95%, transparent 5%);
  cursor: pointer;
  transition: border-color var(--transition-base),
    box-shadow var(--transition-base), transform var(--transition-fast),
    background var(--transition-base);
}

.scenario-item:hover {
  background: color-mix(in srgb, var(--color-surface) 94%, var(--color-accent) 6%);
  border-color: color-mix(in srgb, var(--color-accent) 24%, var(--color-border) 76%);
  box-shadow: var(--shadow-xs);
  transform: translateY(-1px);
}

.scenario-item.active {
  border-color: var(--color-accent);
  background: color-mix(in srgb, var(--color-surface) 90%, var(--color-accent) 10%);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.scenario-item.favorite:not(.active) {
  border-color: color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.scenario-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-md);
}

.scenario-favorite-btn {
  border: none;
  background: none;
  padding: var(--space-3xs);
  border-radius: var(--radius-pill);
  color: var(--color-subtle);
  cursor: pointer;
  transition: color var(--transition-fast), background var(--transition-fast);
}

.scenario-favorite-btn:hover,
.scenario-favorite-btn:focus-visible {
  color: var(--color-accent);
  background: color-mix(in srgb, var(--color-accent) 18%, transparent 82%);
}

.scenario-favorite-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.scenario-favorite-btn.is-favorite {
  color: var(--color-accent);
}

.scenario-name {
  font-weight: 700;
}

.scenario-desc {
  font-size: var(--fs-300);
  color: var(--color-muted);
}


.content {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-xl), 5vw, var(--space-3xl));
}

.tools {
  position: sticky;
  top: calc(var(--header-height) + var(--space-xl));
  align-self: start;
  max-height: calc(100vh - var(--header-height) - 2 * var(--space-xl));
  overflow: auto;
  padding-right: clamp(var(--space-xs), 1.5vw, var(--space-sm));
}

@media (max-width: 900px) {
  .sidebar,
  .tools {
    position: static;
    max-height: none;
    overflow: visible;
  }

  .sidebar {
    padding: clamp(var(--space-lg), 6vw, var(--space-xl))
      clamp(var(--space-md), 5vw, var(--space-xl)) var(--space-lg);
  }

  .tools {
    padding-right: 0;
  }
}

.tools .card {
  margin: 0;
}

.card {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-md), 3vw, var(--space-xl));
  padding: clamp(var(--space-lg), 5vw, var(--space-2xl));
  border-radius: var(--radius-lg);
  background: color-mix(in srgb, var(--color-surface) 97%, transparent 3%);
  border: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent 25%);
  box-shadow: 0 20px 40px color-mix(in srgb, var(--color-glow) 14%, transparent);
  transition: box-shadow var(--transition-base),
    transform var(--transition-fast), border-color var(--transition-base);
}

.content > .card:nth-of-type(2n) {
  background: color-mix(in srgb, var(--color-surface) 92%, var(--color-bg-alt) 8%);
}

@media (hover: hover) and (pointer: fine) {
  .card:hover {
    transform: translateY(-2px);
    box-shadow: 0 28px 48px color-mix(in srgb, var(--color-glow) 20%, transparent);
    border-color: color-mix(in srgb, var(--color-accent) 18%, var(--color-border) 82%);
  }
}

.hidden {
  display: none !important;
}

/*
 * Typography helpers
 * ------------------------------------------------------------------
 */
.card-title {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--fs-300);
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: var(--color-subtle);
}

.card-title .icon {
  width: 16px;
  height: 16px;
}

.muted {
  color: var(--color-muted);
}

.full {
  width: 100%;
}

/*
 * Buttons & controls
 * ------------------------------------------------------------------
 */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  padding: var(--space-sm) clamp(var(--space-md), 2.5vw, var(--space-xl));
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  color: var(--color-text);
  font-weight: 600;
  font-size: var(--fs-300);
  letter-spacing: 0.01em;
  cursor: pointer;
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base),
    transform var(--transition-fast);
}

.btn svg {
  width: 16px;
  height: 16px;
}

.btn:hover {
  background: color-mix(in srgb, var(--color-surface) 92%, var(--color-accent) 8%);
  border-color: color-mix(in srgb, var(--color-accent) 28%, var(--color-border) 72%);
  box-shadow: 0 12px 26px color-mix(in srgb, var(--color-glow) 18%, transparent);
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-primary {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: #fff;
  box-shadow: 0 16px 32px color-mix(in srgb, var(--color-glow) 32%, transparent);
}

.btn-primary:hover {
  background: var(--color-accent-strong);
  border-color: var(--color-accent-strong);
}

.btn-ghost {
  background: transparent;
  border-color: color-mix(in srgb, var(--color-accent) 22%, var(--color-border) 78%);
  color: var(--color-accent);
}

.btn-ghost:hover {
  background: color-mix(in srgb, var(--color-accent) 12%, transparent 88%);
}

.btn[disabled] {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: none;
}

/*
 * Inputs & forms
 * ------------------------------------------------------------------
 */
input,
select,
textarea {
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 97%, transparent 3%);
  padding: var(--space-sm) var(--space-md);
  transition: border-color var(--transition-base),
    box-shadow var(--transition-base), background var(--transition-base);
}

input:focus,
select:focus,
textarea:focus {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 18%, transparent);
  outline: none;
}

textarea {
  min-height: 7rem;
  resize: vertical;
}

.form {
  display: grid;
  gap: clamp(var(--space-md), 3vw, var(--space-xl));
}

@media (min-width: 720px) {
  .form {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.form .field {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.form label {
  font-size: var(--fs-300);
  font-weight: 600;
  color: color-mix(in srgb, var(--color-muted) 80%, var(--color-text) 20%);
  letter-spacing: 0.04em;
}

.form input:invalid,
.form select:invalid,
.form textarea:invalid {
  border-color: var(--color-danger);
}

/*
 * Command builder
 * ------------------------------------------------------------------
 */
.output-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: clamp(var(--space-md), 3vw, var(--space-xl));
}

.output-title {
  font-weight: 600;
  color: color-mix(in srgb, var(--color-muted) 75%, var(--color-text) 25%);
}

.code {
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 78%, transparent 22%);
  background: color-mix(in srgb, var(--color-surface) 94%, transparent 6%);
  padding: clamp(var(--space-md), 3vw, var(--space-xl));
  font-family: var(--font-mono);
  font-size: var(--fs-300);
  overflow-x: auto;
}

.script-row {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.script-row-tools {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.script-btn {
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  cursor: pointer;
  font-size: var(--fs-300);
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base);
}

.script-btn:hover {
  background: color-mix(in srgb, var(--color-surface) 92%, var(--color-accent) 8%);
  border-color: color-mix(in srgb, var(--color-accent) 26%, var(--color-border) 74%);
  box-shadow: var(--shadow-xs);
}

.cmd-search {
  width: 100%;
  margin-top: var(--space-sm);
}

.cmd-boxes {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
}

.cmd-box {
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-pill);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  font-size: var(--fs-300);
  cursor: grab;
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base);
}

.cmd-box:hover {
  background: color-mix(in srgb, var(--color-surface) 92%, var(--color-accent) 8%);
  border-color: color-mix(in srgb, var(--color-accent) 26%, var(--color-border) 74%);
  box-shadow: var(--shadow-xs);
}

.cmd-box.active {
  background: color-mix(in srgb, var(--color-surface) 88%, var(--color-accent) 12%);
  border-color: var(--color-accent);
  color: var(--color-accent);
  cursor: pointer;
}

.cmd-empty {
  padding: var(--space-sm);
  color: var(--color-muted);
  font-size: var(--fs-300);
}

.cmd-detail {
  margin-top: var(--space-lg);
  padding-top: var(--space-lg);
  border-top: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent 25%);
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-sm), 2vw, var(--space-lg));
}

.cmd-detail.empty {
  color: var(--color-muted);
}

.cmd-detail-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: clamp(var(--space-sm), 2vw, var(--space-lg));
}

.cmd-detail-title {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.cmd-detail-synopsis {
  margin: 0;
  color: var(--color-muted);
  font-size: var(--fs-300);
}

.cmd-detail-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-sm);
}

.cmd-detail-link {
  font-size: var(--fs-300);
  color: var(--color-accent);
  text-decoration: none;
}

.cmd-detail-link:hover {
  text-decoration: underline;
}

.cmd-param-list {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-sm), 2vw, var(--space-lg));
}

.cmd-param {
  border: 1px solid color-mix(in srgb, var(--color-border) 78%, transparent 22%);
  border-radius: var(--radius-md);
  padding: clamp(var(--space-md), 3vw, var(--space-xl));
  background: color-mix(in srgb, var(--color-surface) 95%, transparent 5%);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.cmd-param-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: clamp(var(--space-sm), 2vw, var(--space-lg));
}

.cmd-param-toggle {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2xs);
}

.cmd-param-checkbox {
  width: 1.1rem;
  height: 1.1rem;
  accent-color: var(--color-accent);
}

.cmd-param-label {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  cursor: pointer;
  font-size: var(--fs-300);
}

.cmd-param-name {
  font-family: var(--font-mono);
  font-weight: 600;
  font-size: var(--fs-300);
}

.cmd-param-required {
  display: inline-flex;
  align-items: center;
  padding: 0 var(--space-3xs);
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-accent) 20%, transparent 80%);
  color: var(--color-accent-strong);
  font-size: var(--fs-200);
  font-weight: 600;
}

.cmd-param-type {
  font-size: var(--fs-200);
  font-family: var(--font-mono);
  color: var(--color-muted);
}

.cmd-param-desc {
  margin: var(--space-2xs) 0 0 0;
  font-size: var(--fs-300);
  line-height: 1.45;
}

.cmd-param-meta {
  margin: 0;
  display: grid;
  grid-template-columns: auto 1fr;
  column-gap: var(--space-sm);
  row-gap: var(--space-3xs);
  font-size: var(--fs-200);
  color: var(--color-muted);
}

.cmd-param-meta dt {
  font-weight: 600;
}

.cmd-param-meta dd {
  margin: 0;
}

.cmd-param-input {
  width: 100%;
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 97%, transparent 3%);
  font-family: var(--font-mono);
  font-size: var(--fs-300);
  transition: border-color var(--transition-base),
    box-shadow var(--transition-base), background var(--transition-base);
}

.cmd-param-input:focus-visible {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 18%, transparent);
}

.cmd-param-input:disabled {
  opacity: 0.65;
}

.cmd-no-params {
  margin: 0;
  color: var(--color-muted);
  font-size: var(--fs-300);
}

.cmd-editor {
  min-height: 6rem;
  padding: clamp(var(--space-md), 4vw, var(--space-xl));
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 75%, transparent 25%);
  background: color-mix(in srgb, var(--color-surface) 95%, transparent 5%);
  font-family: var(--font-mono);
}

.empty {
  text-align: center;
  color: var(--color-muted);
}

@media (max-width: 720px) {
  .output-toolbar {
    flex-direction: column;
    align-items: flex-start;
  }

  .script-row {
    flex-direction: column;
    align-items: stretch;
  }

  .script-row-tools {
    flex-direction: row;
  }
}

/*
 * Theme picker
 * ------------------------------------------------------------------
 */
.theme-picker {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: clamp(var(--space-sm), 3vw, var(--space-lg));
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--color-border) 78%, transparent 22%);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
}

.theme-label {
  font-size: var(--fs-300);
  color: color-mix(in srgb, var(--color-muted) 80%, var(--color-text) 20%);
  font-weight: 600;
}

.swatches {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.swatch {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid color-mix(in srgb, var(--color-surface) 85%, transparent 15%);
  background: var(--c);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.swatch:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 16px color-mix(in srgb, var(--color-glow) 24%, transparent);
}

.swatch:focus-visible {
  outline: 2px solid var(--color-accent);
}

.accent {
  width: 40px;
  height: 36px;
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.theme-picker select {
  border-radius: var(--radius-pill);
  padding: var(--space-xs) var(--space-sm);
}

/*
 * Variable helper
 * ------------------------------------------------------------------
 */
.variable-card {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.variable-search {
  display: flex;
}

.variable-search-input {
  width: 100%;
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  transition: border-color var(--transition-base),
    box-shadow var(--transition-base);
}

.variable-search-input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.variable-hint {
  font-size: var(--fs-300);
  color: var(--color-muted);
}

.variable-hint a {
  color: var(--color-accent);
}

.variable-count {
  font-weight: 700;
  color: var(--color-accent);
}

.variable-helper {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.variable-results {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  max-height: 30vh;
  overflow: auto;
  padding-right: var(--space-xs);
}

.variable-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.variable-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: var(--fs-200);
  font-weight: 700;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--color-subtle);
}

.variable-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-3xs) var(--space-xs);
  border-radius: var(--radius-pill);
  background: color-mix(in srgb, var(--color-accent) 12%, transparent);
  color: var(--color-accent);
  font-size: var(--fs-200);
  font-weight: 700;
}

.variable-section-body {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
}

.variable-item {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-2xs) var(--space-sm);
  border-radius: var(--radius-pill);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  font-size: var(--fs-300);
  cursor: pointer;
  transition: background var(--transition-base),
    border-color var(--transition-base), box-shadow var(--transition-base);
}

.variable-item:hover {
  background: var(--color-accent-soft);
  border-color: color-mix(in srgb, var(--color-accent) 35%, var(--color-border) 65%);
  box-shadow: var(--shadow-xs);
}

.variable-item.active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: #fff;
  box-shadow: 0 10px 24px rgba(23, 91, 235, 0.28);
}

.variable-detail {
  border-radius: var(--radius-md);
  border: 1px dashed var(--color-border);
  padding: var(--space-lg);
  background: color-mix(in srgb, var(--color-surface) 90%, var(--color-bg) 10%);
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  min-height: 150px;
}

.variable-detail.empty {
  justify-content: center;
  text-align: center;
  color: var(--color-muted);
}

.variable-detail-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-sm);
}

.variable-detail-title {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
}

.variable-detail code,
.variable-usage code {
  font-family: var(--font-mono);
  font-size: var(--fs-300);
  border-radius: var(--radius-sm);
  padding: var(--space-3xs) var(--space-xs);
  background: color-mix(in srgb, var(--color-surface) 88%, var(--color-bg) 12%);
  border: 1px solid var(--color-border);
}

.variable-section-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-3xs) var(--space-xs);
  border-radius: var(--radius-pill);
  background: var(--color-accent-soft);
  color: var(--color-accent);
  font-weight: 700;
  font-size: var(--fs-200);
}

.variable-detail-actions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
}

.variable-meta {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
}

.variable-meta-label {
  font-size: var(--fs-200);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: var(--color-subtle);
}

.variable-description,
.variable-usage {
  font-size: var(--fs-300);
  color: var(--color-muted);
  margin: 0;
}

.variable-copy-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-2xs) var(--space-sm);
  border-radius: var(--radius-pill);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  cursor: pointer;
  transition: background 0.2s ease, border-color 0.2s ease;
}

.variable-copy-btn:hover {
  background: var(--color-accent-soft);
  border-color: color-mix(in srgb, var(--color-accent) 25%, var(--color-border) 75%);
}

.variable-copy-btn.copied {
  background: var(--color-success);
  border-color: var(--color-success);
  color: #fff;
}

.variable-empty {
  color: var(--color-muted);
  font-size: var(--fs-300);
}

/*
 * Modal
 * ------------------------------------------------------------------
 */
.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-overlay {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.6);
}

.modal-container {
  position: relative;
  z-index: 1;
  width: min(520px, calc(100% - 2 * var(--space-lg)));
  border-radius: var(--radius-lg);
  background: var(--color-elevated);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-md);
  padding: var(--space-xl);
}

.modal-body {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.modal-close {
  position: absolute;
  top: var(--space-sm);
  right: var(--space-sm);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: color-mix(in srgb, var(--color-surface) 90%, transparent);
  color: var(--color-muted);
  font-size: 1.25rem;
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.modal-close:hover {
  background: var(--color-accent-soft);
  color: var(--color-accent);
}

/*
 * Footer
 * ------------------------------------------------------------------
 */
.footer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  padding: clamp(var(--space-lg), 4vw, var(--space-xl));
  border-top: 1px solid color-mix(in srgb, var(--color-border) 80%, transparent 20%);
  background: color-mix(in srgb, var(--color-surface) 96%, transparent 4%);
  color: var(--color-muted);
  font-size: var(--fs-300);
}

.footer a {
  color: inherit;
  font-weight: 600;
}

.footer a:hover {
  color: var(--color-accent);
}

/*
 * Motion preferences
 * ------------------------------------------------------------------
 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
